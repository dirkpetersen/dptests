<script type="text/javascript" language="JavaScript" src='/js/header.js'></script>
<!-- Start content - do not edit above this line  -->
<script type='text/javascript' language='JavaScript'>document.querySelector('title').textContent = 'Scipion';</script>
<div class="title">Scipion</div>

<table width=25% align=right> <tr><td>
<div class="toc">
<div class="tocHeading">Quick Links</div>
<div class="tocItem"><a href="#int">Interactive job on Biowulf</a></div>
<div class="tocItem"><a href="#sbatch">Batch job on Biowulf</a></div>
<div class="tocItem"><A href="#doc">Documentation</a></div>
</div></table>

<p>
<a href="https://github.com/I2PC/scipion">Scipion</a> is an image processing framework to obtain 3D models of macromolecular complexes using Electron Microscopy (3DEM). It integrates several software packages and presents an unified interface for both biologists and developers. Scipion allows to execute workflows combining different software tools, while taking care of formats and conversions. Additionally, all steps are tracked and can be reproduced later on.
</p>

<p>There may be multiple versions of Scipion available.  An easy way of selecting the version is to use <a href="/apps/modules.html">modules</a>.  To see the modules available, type</p>

  <pre class="term">module avail scipion</pre>

  <p>To select a module, type</p>

  <pre class="term">module load scipion/[ver]</pre>

  <p>where [ver] is the version of choice.</p>

<h3>Environment variables set:</h3>
<ul>
<li>$PATH</li>
</ul>

<div class="heading">Configuration</div>
<p>Scipion is a package management framework.  Much of what Scipion does is controlled via the local scipion.conf file.  This is located in ~/.config/scipion:</p>

<pre class="term">module load scipion
scipion config
cat ~/.config/scipion/scipion.conf</pre>

<p>This file is created when Scipion is first used.  The <b><tt>SCIPION_USER_DATA</tt></b> parameter in the <b><tt>DIRS_LOCAL</tt></b> section of this file should be edited to direct where generated files are written, as by default it will write to your /home directory:</p>

<pre class="term">[DIRS_LOCAL]
SCIPION_USER_DATA = /data/<b>$USER</b>/apps/scipion/ScipionUserData
SCIPION_LOGS = %(SCIPION_USER_DATA)s/logs
SCIPION_TMP = %(SCIPION_USER_DATA)s/tmp</pre>

<p><b><tt>$USER</tt></b> should be changed to your username.</p>

<a Name="int"></a><div class="heading">Interactive job on Biowulf</div>
<p>Once an interactive session is allocated, e.g.</p>
<pre class="term">sinteractive --cpus-per-task=16 --mem=24g --gres=lscratch:50 --time=8:00:00</pre>

<p>Scipion can be run like so:</p>

<pre class="term">
module load scipion
scipion tests em.workflows.test_workflow_spiderMDA
</pre>

<p>Scipion can be run as a GUI.  This requires an <a href="https://hpc.nih.gov/docs/connect.html">X11 session</a>.</p>

<pre class="term">scipion</pre>

<div><center><img src="scipion_1.png" border=1 alt="GUI" ></div>

<p>A batch job can be launched from the GUI like this:</p>

<p>Double click on the project step:</p>

<div><center><img src="scipion_gui_batch_1.png" border=1 alt="GUI Batch 1" ></div>

<p>Making sure all the input parameters are correct, change 'Use queue?' from 'No' to 'Yes', then click 'Execute':</p>

<div><center><img src="scipion_gui_batch_2.png" border=1 alt="GUI Batch 2" ></div>

<p>The Queue parameters window will appear.  Choose the appropriate partition (queue):</p>

<div><center><img src="scipion_gui_batch_3.png" border=1 alt="GUI Batch 3" ></div>

<p>Make sure the memory, time and local scratch space are adequate, then click 'OK':</p>

<div><center><img src="scipion_gui_batch_4.png" border=1 alt="GUI Batch 4" ></div>


<a Name="sbatch"></a><div class="heading">Batch job on Biowulf</div>
<p>Create a batch input file (e.g. scipion.sh):</p>

<pre class="term">
#!/bin/bash
module load scipion
scipion tests em.workflows.test_workflow_spiderMDA
</pre>

<p>Submit this job using the Slurm <a href="/docs/userguide.html">sbatch</a> command.</p>

<pre class="term">sbatch --cpus-per-task=16 --mem=24g scipion.sh</pre>

<a Name="doc"></a><div class="heading">Documentation</div>
<ul>
<li>Scipion Main Site: <a href="https://github.com/I2PC/scipion">https://github.com/I2PC/scipion</a></li>
</ul>

<!-- End content area - do not edit below this line -->
<script type="text/javascript" language="JavaScript" src='/js/footer.js'></script>
