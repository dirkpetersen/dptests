<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

<!-- force browsers to reload -->
<meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
<meta http-equiv="Pragma" content="no-cache" />
<meta http-equiv="Expires" content="0" />

<link href='/css/main.css'        rel="stylesheet" type="text/css" />
<link href='/css/dropdown.css'    rel="stylesheet" type="text/css" />
<script async type="text/javascript" id="_fed_an_ua_tag" src="https://dap.digitalgov.gov/Universal-Federated-Analytics-Min.js?agency=HHS"></script>
<script src='/js/jquery-3.5.1.min.js' type="text/javascript"></script>
<script src='/js/dropdown.js'         type="text/javascript"></script>
<link href='/css/font-awesome.min.css' rel="stylesheet" type="text/css" />
<script src='/js/toggle.js'         type="text/javascript"></script>

<!--[if lte IE 7.]>
<script defer type="text/javascript" src='/js/pngfix.js' ></script>
<![endif]-->
<title>svanna on Biowulf</title>
</head>
<body>
<br />
<div id="skiplink">
        <a href="#content-area" id="skiplink"></a>
</div>

<!-- downtime alert banner
<div style="display: block; top: 0; background-color: yellow; padding: 5px; border: 1px black; width: 940px; margin: auto; text-align: center;">
  <a href="/about/announcements.php?981">
    <span style="font-size: 24px;">HPC Downtime Thursday, Dec 8 to Sunday, Dec 11</span><br>
    <span style="font-size: 20px;">All RUNNING jobs will be terminated at 8 pm on Dec 8</span>
  </a>
</div>
-->

<!-- downtime alert banner DURING DOWNTIME
<div style="display: block; top: 0; background-color: red; padding: 20px; border: 1px black; width: 940px; margin: auto; text-align: center;">
  <a href="/about/announcements.php?981">
    <span style="font-size: 24px;">HPC IS CURRENTLY DOWN FOR MAINTENANCE</span><br>
    <span style="font-size: 20px;">downtime is expected to complete by Sun Dec 11 at 8 pm</span>
  </a>
</div>
-->

<div class="container">
<table class="head_area" cellpadding="0" cellspacing="0" border="0" width="100%">
<tr><th scope="col"></th><td valign="bottom" scope="col">
<div class="titleLocation">
<a href="https://hpc.nih.gov"><img src="/images/BIOWULF_LOGO" border=0 height=72 alt="Biowulf High Performance Computing at the NIH"></a>
</td>
<td align="right" valign="top" scope="col">
<div  class="searchCell">
<form action="https://hpc.nih.gov/cgi-bin/search/swish.cgi" method="get">
<input type="hidden" name="maxresultflag" value="200" />
<!-- search all three swish-e indices by default -->
<input type="hidden" name="si" value="0" />
<input type="hidden" name="si" value="1" />
<input type="hidden" name="si" value="2" />
<input type="text" class="formfield" size="14" id="searchbox" name="query" aria-label="search NIH HPC site" placeholder=" Search " />
</form>

<a href="https://github.com/NIH-HPC">
    <img border="0"
    align="right" style="position: absolute; top: 72px; right: 72px; "
    src="https://hpc.nih.gov/images/GitHub-Mark-Light-20px.png" alt="GitHub"
    title="Click here to visit our GitHub repositories" />
</a>

<a href="https://www.youtube.com/channel/UCx-kNd1kBskYr5KLT9-Erew">
    <img border="0"
    align="right" style="position: absolute; top: 72px; right: 48px; "
    src="https://hpc.nih.gov/images/YouTube-social-squircle_red_20px.png" alt="YouTube"
    title="Click here to visit our YouTube channel" />
</a>
<a href="https://twitter.com/nih_hpc">
    <img border="0"
    align="right" style="position: absolute; top: 72px; right: 24px; "
    src="/images/TwitterLogo20.png" alt="@nih_hpc"
    title="Click here to visit our twitter feed @nih_hpc" />
</a>
<a href="/hpc_RSS.xml"><img border="0"
    align="right" style="position: absolute; top: 72px; right: 0px;"
    src="https://hpc.nih.gov/images/RSS20.png" alt="RSS Feed"
    title="Click here to add an RSS feed from HPC @ NIH" />
</a>

</div>
</td>
</tr>
</table>

<!-- The new and improved dropdown navigation bar -->
<div id='cssmenu'>
  <ul>
    <li class='has-sub'><a href='https://hpc.nih.gov/systems/'><span>Systems</span></a>
      <span id="Systems_menulist"></span>
    </li>

    <li class='has-sub'><a href='https://hpc.nih.gov/apps/'><span>Applications</span></a>
      <span id="Applications_menulist"></span>
    </li>

    <li><a href='https://hpc.nih.gov/refdb/'><span>Reference Data</span></a></li>

    <li class='has-sub'><a href='https://hpc.nih.gov/storage/'><span>Storage</span></a>
      <span id="Storage_menulist"></span>
    </li>

    <li class='has-sub'><a href='https://hpc.nih.gov/docs/user_guides.html'><span>User Guides</span></a>
      <span id="User_Guides_menulist"></span>
    </li>

    <li class='has-sub'><a href='https://hpc.nih.gov/training/'><span>Training</span></a>
      <span id="Training_menulist"></span>
    </li>

    <li><a href='https://hpcnihapps.cit.nih.gov/auth/dashboard/'><span>User Dashboard</span></a></li>

    <li class='has-sub'><a href='https://hpc.nih.gov/docs/how_to.html'><span>How To</span></a>
      <span id="How_To_menulist"></span>
    </li>

    <li class='has-sub'><a href='https://hpc.nih.gov/about/'><span>About</span></a>
      <span id="About_menulist"></span>
    </li>
  </ul>
</div>
<!-- End navigation bar -->



<div class="main">
<a name="content-area"></a>
<!-- Start content - do not edit above this line  -->
<div class="title">svanna on Biowulf</div>

<table width=25% align=right>
  <tr>
    <td>
      <div class="toc">
        <div class="tocHeading">Quick Links</div>
        <div class="tocItem"><A href="#doc">Documentation</a></div>
        <div class="tocItem"><a href="#notes">Notes</a></div>
        <div class="tocItem"><a href="#int">Interactive job </a></div>
        <div class="tocItem"><a href="#sbatch">Batch job </a></div>
        <div class="tocItem"><a href="#swarm">Swarm of jobs </a></div>
      </div>
</table>

<p>
The svanna is an efficient and accurate pathogenicity prediction for coding and regulatory structural variants in long-read genome sequencing.
</p>
<p>
<ul>
</ul>

<h3>References:</h3>
<ul>
<li>
Danis, D., Jacobsen, J.O.B., Balachandran, P. et al. <em>SvAnna: efficient and accurate pathogenicity prediction of coding and regulatory structural variants in long-read genome sequencing.</em>Genome Med 14, 44 (2022)

    <a href="https://genomemedicine.biomedcentral.com/articles/10.1186/s13073-022-01046-6">Journal</a>
</li>
</ul>


<a Name="doc"></a><div class="heading">Documentation</div>
<ul>
<li>svanna Github:<a href="https://github.com/TheJacksonLaboratory/SvAnna">Github</a></li>
<li>svanna doc:<a href="https://svanna.readthedocs.io/en/master/">Github</a></li>
</ul>

<a Name="notes"></a><div class="heading">Important Notes</div>
<ul>
    <li>Module Name: <tt>svanna</tt> (see <a href="/apps/modules.html">the modules page</a> for more information)
	<li>The svanna ((available on biowulf) command lines could be run as:
	<pre class="term">
	java -jar $SVANNA_PATH/svanna-cli-1.0.3.jar prioritize -d $SVANNA_DB/2304 --help
	</pre>
        <li>svanna database in $SVANNA_DB 
        <li>svanna testing vcf in $SVANNA_TEST_DATA
<P>
      </dd>
<P>
</ul>
<a Name="int"></a><div class="heading">Interactive job</div>
<div class="nudgeblock"><a href="/docs/userguide.html#int">Interactive jobs</a> should be used for debugging, graphics, or applications that cannot be run as batch jobs.</div>
<p>Allocate an <a href="/docs/userguide.html#int">interactive session</a> and run the program. <br>Sample session (user input in <b>bold</b>):</p>
<pre class="term">
[user@biowulf]8$ <b>sinteractive --mem=8g</b>
salloc.exe: Pending job allocation 46116226
salloc.exe: job 46116226 queued and waiting for resources
salloc.exe: job 46116226 has been allocated resources
salloc.exe: Granted job allocation 46116226
salloc.exe: Waiting for resource configuration
salloc.exe: Nodes cn3144 are ready for job

[user@cn3144 ~]$ <b>module load svanna</b>
[user@cn3144 ~]$ <b>mkdir /data/$USER/svanna_test/</b>
[user@cn3144 ~]$ <b>cd /data/$USER/svanna_test/</b>
[user@cn3144 ~]$ <b>java -jar $SVANNA_PATH/svanna-cli-1.0.3.jar prioritize -d $SVANNA_DB/2304 --help</b>
Prioritize the variants.
Usage: svanna-cli.jar prioritize [-hVv] [--no-breakends] [--uncompressed-output] -d=path/to/datadir
                                 [--frequency-threshold=<frequencyThreshold>] [--ic-mica-mode={DATABASE,IN_MEMORY}]
                                 [--min-read-support=<minAltReadSupport>] [--n-threads=2] [--out-dir=<outDir>]
                                 [--output-format=html] [--overlap-threshold=<overlapThreshold>] [-p=<phenopacket>]
                                 [--prefix=<outPrefix>] [--promoter-fitness-gain=<promoterFitnessGain>]
                                 [--promoter-length=<promoterLength>] [--report-top-variants=100]
                                 [--term-similarity-measure={RESNIK_SYMMETRIC, RESNIK_ASYMETRIC}] [--vcf=<vcf>]
                                 [-t=<hpoTermIdList>]...
  -v                         Specify multiple -v options to increase verbosity.
                             For example, `-v -v -v` or `-vvv`
  -d, --data-directory=path/to/datadir
                             Path to SvAnna data directory.
  -h, --help                 Show this help message and exit.
  -V, --version              Print version information and exit.
SvAnna configuration:
      --term-similarity-measure={RESNIK_SYMMETRIC, RESNIK_ASYMETRIC}
                             Phenotype term similarity measure (default: RESNIK_SYMMETRIC).
      --ic-mica-mode={DATABASE,IN_MEMORY}
                             The mode for getting information content of the most informative common ancestors for
                               terms t1, and t2 (default: DATABASE).
      --promoter-length=<promoterLength>
                             Number of bases prepended to a transcript and evaluated as a promoter region (default:
                               2000).
      --promoter-fitness-gain=<promoterFitnessGain>
                             Set to 0. to score the promoter variants as strictly as coding variants, or to 1. to skip
                               them altogether (default: 0.6).
Analysis input:
  -p, --phenopacket=<phenopacket>
                             Path to v1 or v2 phenopacket in JSON, YAML or Protobuf format.
  -t, --phenotype-term=<hpoTermIdList>
                             HPO term ID(s). Can be provided multiple times.
      --vcf=<vcf>            Path to the input VCF file.
Run options:
      --frequency-threshold=<frequencyThreshold>
                             Frequency threshold as a percentage [0-100] (default: 1.0).
      --overlap-threshold=<overlapThreshold>
                             Percentage threshold for determining variant's region is similar enough to database entry
                               (default: 80.0).
      --min-read-support=<minAltReadSupport>
                             Minimum number of ALT reads to prioritize (default: 3).
      --n-threads=2          Process variants using n threads (default: 2).
Output options:
      --no-breakends         Do not include breakend variants into HTML report (default: false).
      --output-format=html   Comma separated list of output formats to use for writing the results (default: html).
      --out-dir=<outDir>     Path to folder where to write the output files (default: current working directory).
      --prefix=<outPrefix>   Prefix for output files (default: based on the input VCF name).
      --report-top-variants=100
                             Report top n variants (default: 100).
      --uncompressed-output  Write tabular and VCF output formats with no compression (default: false).
See the full documentation at `https://svanna.readthedocs.io/en/master`

[user@cn3144 ]$ <b>exit</b>
salloc.exe: Relinquishing job allocation 46116226
[user@biowulf]$
</pre>
    
<P>
<a Name="sbatch"></a><div class="heading">Batch job</div>
<div class="nudgeblock">Most jobs should be run as <A href="/docs/userguide.html#submit">batch jobs</a>.</div>
<p>Create a batch input file (e.g. svanna.sh). For example:</p>
<script src='/js/highlight.pack.js' type="text/javascript"></script>
<link href='/css/highlightjs/foundation.css' rel="stylesheet" type="text/css" />
<script>hljs.highlightAll();</script>
<pre class="term">
<code class="bash">
#!/bin/bash
set -e
module load svanna
cp $SVANNA_TEST_DATA/*.vcf .
java -jar $SVANNA_PATH/svanna-cli-1.0.3.jar prioritize -d $SVANNA_DB/2304 --vcf example.vcf  --phenotype-term HP:0011890 --phenotype-term HP:0000978 --phenotype-term HP:0012147
</code>
</pre>
<p>Submit this job using the Slurm <a href="/docs/userguide.html">sbatch</a> command.</p>

<pre class="term">sbatch --mem=8g svanna.sh</pre>

<a Name="swarm"></a><div class="heading">Swarm of Jobs </div>
<div class="nudgeblock">A <a href="/apps/swarm.html">swarm of jobs</a> is an easy way to submit a set of independent commands requiring identical resources.</div>

<p>Create a swarmfile (e.g. svanna.swarm). For example:</p>

<pre class="term">
java -jar $SVANNA_PATH/svanna-cli-1.0.3.jar prioritize -d $SVANNA_DB/2304 --vcf example1.vcf --out-dir results --prefix example1  --phenotype-term HP:0011890 --phenotype-term HP:0000978 --phenotype-term HP:0012147
java -jar $SVANNA_PATH/svanna-cli-1.0.3.jar prioritize -d $SVANNA_DB/2304 --vcf example2.vcf --out-dir results --prefix example2  --phenotype-term HP:0011890 --phenotype-term HP:0000978 --phenotype-term HP:0012147
</pre>

<p>Submit this job using the <a href='/apps/swarm.html'>swarm</a> command.</p>

<pre class="term">swarm -f svanna.swarm [-t #] [-g #] --module svanna</pre>
where
<table border=0>
  <tr><td width=20%><tt>-g <i>#</i> </tt><td>Number of Gigabytes of memory required for each process (1 line in the swarm command file)
  <tr><td><tt>-t <i>#</i></tt> <td>Number of threads/CPUs required for each process (1 line in the swarm command file).
  <tr><td><tt>--module svanna</tt> <td>Loads the svanna module for each subjob in the swarm
</table>















<!-- End content area - do not edit below this line -->
</div>
<div align="right" class="lastmod"><script type="text/javascript" language="JavaScript" src='https://hpc.nih.gov/js/lastmod.js'></script></div>
<div class="footarea">
<div class="footer">
<a href='https://hpc.nih.gov' class="footlink">HPC @ NIH </a> ~
<a href='https://hpc.nih.gov/about/contact.html' class="footlink">Contact</a> 
</div>
<div class="footer2">
<a href='https://hpc.nih.gov/docs/disclaimer.html' class="footlink">Disclaimer</a> ~ 
<a href='https://hpc.nih.gov/docs/privacy.html' class="footlink">Privacy</a> ~ 
<a href='https://hpc.nih.gov/docs/accessibility.html' class="footlink">Accessibility</a> ~ 
<a href='https://cit.nih.gov/' class="footlink">CIT</a> ~ 
<a href='https://www.nih.gov/' class="footlink">NIH</a> ~ 
<a href='https://www.dhhs.gov/' class="footlink">DHHS</a> ~ 
<a href='https://www.firstgov.gov/' class="footlink">USA.gov</a> ~
<a href='https://www.hhs.gov/vulnerability-disclosure-policy/index.html' class="footlink">HHS Vulnerability Disclosure</a>
</div>
</div>
</div>
<br />
</body>
</html>
