<script type="text/javascript" language="JavaScript" src='/js/header.js'></script>
<!-- Start content - do not edit above this line  -->
<script type='text/javascript' language='JavaScript'>document.querySelector('title').textContent = ' Connectome Workbench on Biowulf';</script>
<div class="title">
Connectome Workbench on Biowulf</div>
<P>
<table width=25% align=right> <tr><td>
<div class="toc">
<div class="tocHeading">Quick Links</div>
<div class="tocItem"><a href="#int">Interactive job on Biowulf</a></div>
<div class="tocItem"><a href="#serial">Batch job on Biowulf</a></div>
<div class="tocItem"><a href="#swarm">Swarm of jobs</a></div>
<div class="tocItem"><A href="#doc">Documentation</a></div>
</div></table>

<!-- ======================================================================= -->
<div class="heading">Description</div>

<p>Connectome Workbench is an open source, freely available visualization and 
discovery tool used to map neuroimaging data, especially data generated by the 
Human Connectome Project. </p>

<h3>Reference</h3>
<ul>
    <li>Van Essen, D. C., Smith, S. M., Barch, D. M., Behrens, T. E., 
	Yacoub, E., Ugurbil, K., & WU-Minn HCP Consortium. (2013). The WU-Minn human 
	connectome project: an overview. <i>Neuroimage</i>, <i>80</i>, 62-79.
    </li>
	<li>
	Glasser, M. F., Sotiropoulos, S. N., Wilson, J. A., Coalson, T. S., 
	Fischl, B., Andersson, J. L., ... & WU-Minn HCP Consortium. (2013). The 
	minimal preprocessing pipelines for the Human Connectome Project. 
	<i>Neuroimage</i>, <i>80</i>, 105-124.
	</li>
	<li>
	Marcus, D. S., Harwell, J., Olsen, T., Hodge, M., Glasser, M. F., Prior, 
	F., ... & Van Essen, D. C. (2011). Informatics and data mining tools and 
	strategies for the human connectome project. <i>Frontiers in 
	neuroinformatics</i>, <i>5</i>.
	</li>
</ul>

<h3>Web sites</h3>
<ul>
    <li><a href="http://www.humanconnectome.org/software/connectome-workbench.html">Home page</a></li>
    <li><a href="https://github.com/Washington-University/workbench">GitHub</a></li>
</ul>

<!-- ======================================================================= -->
<a Name="int"></a><div class="heading">Interactive job</div>
<div class="nudgeblock"><a href="/docs/userguide.html#int">Interactive jobs</a> should be used for debugging, graphics, or applications that cannot be run as batch jobs.</div>
<p>Allocate an <a href="/docs/userguide.html#int">interactive session</a> and run the program. Sample session:</p>
<pre class="term">
[user@biowulf]$ <b>sinteractive</b>
salloc.exe: Pending job allocation 46116226
salloc.exe: job 46116226 queued and waiting for resources
salloc.exe: job 46116226 has been allocated resources
salloc.exe: Granted job allocation 46116226
salloc.exe: Waiting for resource configuration
salloc.exe: Nodes cn3144 are ready for job

[user@cn3144 ~]$ <b>module load connectome-workbench</b>

[user@cn3144 ~]$ <b>wb_command -help</b>

[user@cn3144 ~]$ <b>wb_view -help</b>

[user@cn3144 ~]$ <b>wb_import</b>

[user@cn3144 ~]$ <b>exit</b>
salloc.exe: Relinquishing job allocation 46116226
[user@biowulf ~]$
</pre>

<p>
Additionally, if you have X11 forwarding enabled you can use the workbench gui
by entering <b>wb_view</b> with no arguments.
</p>

<!-- ======================================================================= -->
<a class="navbar-safe-anchor"  Name="serial"></a>
<div class="heading">Batch jobs on Biowulf</div>

<p>
wb_command gives access to a wide variety of commands related to data analysis 
iand image processing that can be used in your scripts.  Use the following 
argument to view the documentation.
</p>
<pre class="term">
[user@helix ~]$ <b>wb_command -all-commands-help</b>
</pre>
<p>
After selecting the command(s) you want to run in a batch script, set it up like 
so.
</p>
<pre class="term">
#!/bin/bash
# this file is called myjob.bat

cd /data/$USER/my_workbench_data
module load connectome-workbench

wb_command ...my_command1...
wb_command ...my_command2...
wb_command ...my_command3...
...
wb_command ...my_commandN...
</pre>
<p>
Submit the job to SLURM with:
</p>
<pre class="term">
[user@helix ~]$ <b>sbatch  myjob.bat</b>
</pre>

<!-- ======================================================================= -->
<a class="navbar-safe-anchor"  Name="swarm"></a>
<div class="heading">Swarm of jobs on Biowulf</div>

<p>
If you need to run a large number of batch jobs, you can run them in parallel 
using the swarm program.  For this example, imagine we have a large number of 
files to convert from cifti to nifti format.  We would create a swarm file 
(called "workbench.swarm") that looked something like this:
</p>
<pre class="term">
 wb_command -cifti-convert -to-nifti /path/to/file1.cifti /path/to/file1.nifti
 wb_command -cifti-convert -to-nifti /path/to/file2.cifti /path/to/file2.nifti
 wb_command -cifti-convert -to-nifti /path/to/file3.cifti /path/to/file3.nifti
 ...                             
 wb_command -cifti-convert -to-nifti /path/to/fileN.cifti /path/to/fileN.nifti
</pre>
<p>We would submit it to the queue with</p>
<pre class="term">
[user@helix ~]$ <b>swarm -f workbench.swarm --module connectome-workbench </b>
</pre>
<p>
See the <a href="/apps/swarm.html">swarm webpage</a> for more
information, or contact the Biowulf staff at staff@hpc.nih.gov  
</p>


<!-- ======================================================================= -->

<!-- ======================================================================= -->
<a class="navbar-safe-anchor"  Name="doc"></a>
<div class="heading">Documentation</div>

<ul>
	<li><a href="http://www.humanconnectome.org/documentation/tutorials/Connectome_WB_Tutorial_v1.0.pdf">Connectome Workbench Tutorial</a></li>
    <li><a href="http://www.humanconnectome.org/software/workbench-command.php">Using Workbench Command</a></li>
</ul>


<!-- End content area - do not edit below this line -->
<script type="text/javascript" language="JavaScript" src='/js/footer.js'></script>
